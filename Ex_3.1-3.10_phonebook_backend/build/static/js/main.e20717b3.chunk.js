(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(14),o=n.n(c),a=n(3),s=n(4),u=n.n(s),i="/api/persons",d={getAll:function(){return u.a.get(i).then((function(e){return e.data}))},create:function(e){return u.a.post(i,e).then((function(e){return e.data}))},update:function(e,t){return u.a.put("".concat(i,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return u.a.delete("".concat(i,"/").concat(e))}},j=n(0),b=function(e){var t=e.person,n=Object(r.useState)(!1),c=Object(a.a)(n,2),o=c[0],s=c[1];return o?Object(j.jsx)("div",{}):Object(j.jsx)("div",{children:Object(j.jsxs)("ul",{children:[t.name," ",t.number,Object(j.jsx)("button",{onClick:function(){window.confirm("Are you sure you want to delete ".concat(t.name,"?"))&&(s(!0),d.remove(t.id))},children:"delete"})]})})},h=function(e){var t=e.persons,n=e.newSearch;return Object(j.jsx)("div",{children:t.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())})).map((function(e){return Object(j.jsx)(b,{person:e},e.id)}))})},l=function(e){var t=e.message,n=e.color,r=e.setMessage,c={color:n,background:"lightgrey",borderStyle:"solid",borderRadius:"5px",fontSize:25,padding:"10px",marginBottom:"20px"};return setTimeout((function(){r()}),5e3),t?Object(j.jsx)("div",{style:c,children:t}):Object(j.jsx)("p",{})},f=function(e){var t=e.persons,n=e.setPersons,c=e.setColor,o=e.setMessage,s=Object(r.useState)(""),u=Object(a.a)(s,2),i=u[0],b=u[1],h=Object(r.useState)(""),l=Object(a.a)(h,2),f=l[0],O=l[1];return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r=t.find((function(e){return e.name===i}));if(r)window.confirm("".concat(i," is already added to phonebook, replace the old number with the new one?"))&&d.update(r.id,{name:i,number:f}).then((function(e){n(t.map((function(t){return t.id!==r.id?t:e}))),c("green"),o("Phone number has been updated for ".concat(i)),b(""),O("")})).catch((function(e){c("red"),o("".concat(i," has already been removed from the server"))}));else{var a={name:i,number:f};d.create(a).then((function(e){n(e),c("green"),o("Added ".concat(i)),b(""),O("")})).catch((function(e){c("red"),o(e.response.data.error)}))}},children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:i,onChange:function(e){b(e.target.value)}}),Object(j.jsx)("br",{}),"number: ",Object(j.jsx)("input",{value:f,onChange:function(e){O(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",children:"add"})]})})},O=function(e){var t=e.newSearch,n=e.setNewSearch;return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{value:t,onChange:function(e){n(e.target.value)},placeholder:"search here..."})]})},p=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),s=Object(a.a)(o,2),u=s[0],i=s[1],b=Object(r.useState)(),p=Object(a.a)(b,2),m=p[0],x=p[1],v=Object(r.useState)(""),g=Object(a.a)(v,2),w=g[0],S=g[1];return Object(r.useEffect)((function(){d.getAll().then((function(e){return c(e)}))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(l,{message:m,color:w,setMessage:x}),Object(j.jsx)(O,{newSearch:u,setNewSearch:i}),Object(j.jsx)("h3",{children:"add a new"}),Object(j.jsx)(f,{persons:n,setPersons:c,setColor:S,setMessage:x}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(h,{persons:n,newSearch:u})]})};o.a.render(Object(j.jsx)(p,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.e20717b3.chunk.js.map