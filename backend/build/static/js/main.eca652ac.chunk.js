(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(14),o=n.n(c),s=n(3),a=n(4),i=n.n(a),u="/api/persons",d={getAll:function(){return i.a.get(u).then((function(e){return e.data}))},create:function(e){return i.a.post(u,e).then((function(e){return e.data}))},update:function(e,t){return i.a.put("".concat(u,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(u,"/").concat(e))}},j=n(0),b=function(e){var t=e.person,n=e.persons,c=e.setPersons,o=e.setColor,a=e.setMessage,i=Object(r.useState)(!1),u=Object(s.a)(i,2),b=u[0],l=u[1];return b?Object(j.jsx)("div",{}):Object(j.jsx)("div",{children:Object(j.jsxs)("ul",{children:[t.name," ",t.number,Object(j.jsx)("button",{onClick:function(){window.confirm("Are you sure you want to delete ".concat(t.name,"?"))&&(l(!0),d.remove(t.id).then((function(e){o("red"),a("".concat(t.name," is deleted")),c(n.filter((function(e){return e.id!==t.id})))})).catch((function(e){o("red"),a("".concat(t.name," ").concat(e.response.data.error)),c(n.filter((function(e){return e.id!==t.id})))})))},children:"delete"})]})})},l=function(e){var t=e.persons,n=e.setPersons,r=e.newSearch,c=e.setMessage,o=e.setColor;return Object(j.jsx)("div",{children:t.filter((function(e){return e.name.toLowerCase().startsWith(r.toLowerCase())})).map((function(e){return Object(j.jsx)(b,{person:e,persons:t,setPersons:n,setColor:o,setMessage:c},e.id)}))})},h=function(e){var t=e.persons,n=e.setPersons,c=e.setColor,o=e.setMessage,a=Object(r.useState)(""),i=Object(s.a)(a,2),u=i[0],b=i[1],l=Object(r.useState)(""),h=Object(s.a)(l,2),f=h[0],O=h[1];return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r=t.find((function(e){return e.name===u}));if(r)window.confirm("".concat(u," is already added to phonebook, replace the old number with the new one?"))&&d.update(r.id,{name:u,number:f}).then((function(e){n(t.map((function(t){return t.id!==r.id?t:e}))),c("green"),o("Phone number has been updated for ".concat(u)),b(""),O("")})).catch((function(e){n(t.filter((function(e){return e.id!==r.id}))),c("red"),o("".concat(u," ").concat(e.response.data.error))}));else{var s={name:u,number:f};d.create(s).then((function(e){n(t.concat(e)),c("green"),o("Added ".concat(u)),b(""),O("")})).catch((function(e){c("red"),o(e.response.data.error)}))}},children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:u,onChange:function(e){b(e.target.value)}}),Object(j.jsx)("br",{}),"number: ",Object(j.jsx)("input",{value:f,onChange:function(e){O(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",children:"add"})]})})},f=function(e){var t=e.newSearch,n=e.handleNewSearch;return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{value:t,onChange:n,placeholder:"search here..."})]})},O=function(e){var t=e.message,n=e.color,r=e.setMessage,c={color:n,background:"lightgrey",borderStyle:"solid",borderRadius:"5px",fontSize:25,padding:"10px",marginBottom:"20px"};return setTimeout((function(){r()}),5e3),t?Object(j.jsx)("div",{style:c,children:t}):Object(j.jsx)("p",{})},p=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),a=Object(s.a)(o,2),i=a[0],u=a[1],b=Object(r.useState)(),p=Object(s.a)(b,2),m=p[0],x=p[1],g=Object(r.useState)(""),v=Object(s.a)(g,2),w=v[0],S=v[1];Object(r.useEffect)((function(){d.getAll().then((function(e){return c(e)}))}),[]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(O,{message:m,color:w,setMessage:x}),Object(j.jsx)(f,{newSearch:i,handleNewSearch:function(e){u(e.target.value)}}),Object(j.jsx)("h3",{children:"add a new"}),Object(j.jsx)(h,{persons:n,setPersons:c,setMessage:x,setColor:S}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(l,{persons:n,setPersons:c,newSearch:i,setMessage:x,setColor:S})]})};o.a.render(Object(j.jsx)(p,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.eca652ac.chunk.js.map